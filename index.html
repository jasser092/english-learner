<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 480px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .audio-controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .audio-btn {
            background: #3498db;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background 0.3s;
            font-size: 14px;
        }
        
        .audio-btn:hover {
            background: #2980b9;
        }
        
        .english-word {
            background: #f8f9fa;
            padding: 30px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 3px solid #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .english-word h2 {
            font-size: 32px;
            color: #000000;
            font-weight: bold;
            margin: 0;
            text-align: center;
        }
        
        .speaker-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.3s;
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .speaker-btn:hover {
            background: #ecf0f1;
        }
        
        .speaker-btn.speaking {
            color: #e74c3c;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-50%) scale(1.1); }
            100% { transform: translateY(-50%) scale(1); }
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .option-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .option-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .option-btn.correct {
            background: #27ae60;
        }
        
        .option-btn.wrong {
            background: #e74c3c;
        }
        
        .controls {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            background: #9b59b6;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover:not(:disabled) {
            background: #8e44ad;
        }
        
        .control-btn.exit-btn {
            background: #e74c3c;
        }
        
        .control-btn.exit-btn:hover {
            background: #c0392b;
        }
        
        .control-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        .stats {
            margin-top: 15px;
            padding: 12px;
            background: #ecf0f1;
            border-radius: 8px;
            font-size: 13px;
            color: #2c3e50;
            text-align: center;
        }

        .add-words-section {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #3498db;
        }

        .add-words-section h3 {
            margin-bottom: 10px;
            text-align: center;
            color: #2c3e50;
            font-size: 16px;
        }

        .add-words-section textarea {
            width: 100%;
            height: 120px;
            padding: 8px;
            border: 2px solid #bdc3c7;
            border-radius: 6px;
            font-size: 13px;
            margin-bottom: 8px;
            resize: vertical;
        }

        .add-words-section button {
            background: #27ae60;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            width: 100%;
        }

        .add-words-section button:hover {
            background: #219a52;
        }

        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
        }

        .message.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.wrong {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .session-stats {
            background: #34495e;
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
        }

        .session-stats h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }

        .session-stats p {
            margin: 5px 0;
            font-size: 14px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: #27ae60;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ Ù…ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h1>
            <p>Ø§Ø®ØªØ± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„ÙƒÙ„Ù…Ø©</p>
        </div>

        <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØµÙˆØª -->
        <div class="audio-controls">
            <button class="audio-btn" onclick="toggleAutoSpeak()">
                <span id="autoSpeakIcon">ğŸ”Š</span>
            </button>
        </div>

        <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© -->
        <div id="message" class="message" style="display: none;"></div>

        <!-- Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© -->
        <div class="english-word">
            <h2 id="englishWord">Book</h2>
            <button class="speaker-btn" onclick="speakCurrentWord()">ğŸ”Š</button>
        </div>

        <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø© -->
        <div class="options">
            <button class="option-btn" onclick="checkAnswer(0)">ÙƒØªØ§Ø¨</button>
            <button class="option-btn" onclick="checkAnswer(1)">Ù‚Ù„Ù…</button>
            <button class="option-btn" onclick="checkAnswer(2)">Ù…Ø¯Ø±Ø³Ø©</button>
        </div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="controls">
            <button class="control-btn" onclick="toggleAddWords()">Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª</button>
            <button class="control-btn" onclick="skipWord()" style="background: #e67e22;">ØªØ®Ø·ÙŠ</button>
            <button class="control-btn exit-btn" onclick="showSessionStats()">Ø®Ø±ÙˆØ¬</button>
        </div>

        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
        <div class="stats" id="stats">
            Ø§Ù„ÙƒÙ„Ù…Ø§Øª: 6 | Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: 0
        </div>

        <!-- Ù‚Ø³Ù… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª -->
        <div id="addWordsPanel" class="add-words-section" style="display: none;">
            <h3>Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <textarea id="wordsTextarea" placeholder="Ø§Ù„ØµÙŠØºØ©: english=Ø¹Ø±Ø¨ÙŠ
Ù…Ø«Ø§Ù„:
book=ÙƒØªØ§Ø¨
water=Ù…Ø§Ø¡
computer=Ø­Ø§Ø³ÙˆØ¨

ÙŠÙ…ÙƒÙ†Ùƒ Ù„ØµÙ‚ Ù‚Ø§Ø¦Ù…Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù‡Ù†Ø§..."></textarea>
            <button onclick="addMultipleWords()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª</button>
            <div style="margin-top: 10px; text-align: center;">
                <button class="control-btn" onclick="addDefaultWords()" style="background: #e67e22;">Ø¥Ø¶Ø§ÙØ© 1000 ÙƒÙ„Ù…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</button>
            </div>
        </div>

        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø© -->
        <div id="sessionStats" class="session-stats" style="display: none;">
            <h3>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©</h3>
            <p id="sessionInfo">ØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ 0 ÙƒÙ„Ù…Ø©</p>
            <p id="sessionCorrect">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: 0</p>
            <p id="sessionPercentage">Ø§Ù„Ù†Ø³Ø¨Ø©: 0%</p>
            <div class="progress-bar">
                <div id="progressFill" class="progress" style="width: 0%"></div>
            </div>
            <button class="control-btn" onclick="hideSessionStats()" style="background: #3498db; margin-top: 10px;">Ø§Ø³ØªÙ…Ø±Ø§Ø±</button>
            <button class="control-btn exit-btn" onclick="resetSession()" style="margin-top: 5px;">Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        </div>
    </div>

    <script>
        // Ø®Ø¯Ù…Ø© Text-to-Speech
        class TTSService {
            constructor() {
                this.synth = window.speechSynthesis;
                this.voices = [];
                this.selectedVoice = null;
                this.isSupported = false;
                this.isInitialized = false;
                this.rate = 1.0;
                this.pitch = 1.0;
                this.volume = 1.0;
                
                this.init();
            }

            init() {
                if (!this.synth) {
                    console.warn('Text-to-Speech ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­');
                    return;
                }

                this.isSupported = true;
                this.loadVoices();
                
                this.synth.onvoiceschanged = () => {
                    this.loadVoices();
                };
            }

            loadVoices() {
                this.voices = this.synth.getVoices();
                
                // Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØª Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ
                this.selectedVoice = this.voices.find(voice => 
                    voice.lang.includes('en-US')
                ) || this.voices.find(voice => 
                    voice.lang.includes('en')
                ) || this.voices[0];
                
                this.isInitialized = true;
            }

            speak(text) {
                if (!this.isSupported || !this.isInitialized) {
                    return false;
                }

                this.stop();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.voice = this.selectedVoice;
                utterance.rate = this.rate;
                utterance.pitch = this.pitch;
                utterance.volume = this.volume;

                utterance.onstart = () => {
                    document.querySelector('.speaker-btn').classList.add('speaking');
                };

                utterance.onend = () => {
                    document.querySelector('.speaker-btn').classList.remove('speaking');
                };

                utterance.onerror = () => {
                    document.querySelector('.speaker-btn').classList.remove('speaking');
                };

                this.synth.speak(utterance);
                return true;
            }

            stop() {
                if (this.isSupported) {
                    this.synth.cancel();
                }
            }

            setRate(rate) {
                this.rate = rate;
            }

            setPitch(pitch) {
                this.pitch = pitch;
            }

            isSpeaking() {
                return this.isSupported ? this.synth.speaking : false;
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø¯Ù…Ø©
        const ttsService = new TTSService();

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        let words = [
            { english: "Book", correct: "ÙƒØªØ§Ø¨", wrong1: "Ù‚Ù„Ù…", wrong2: "Ù…Ø¯Ø±Ø³Ø©" },
            { english: "She", correct: "Ù‡ÙŠ", wrong1: "Ù‡Ùˆ", wrong2: "Ù‡Ù…" },
            { english: "Red", correct: "Ø£Ø­Ù…Ø±", wrong1: "Ø£Ø²Ø±Ù‚", wrong2: "Ø£Ø®Ø¶Ø±" },
            { english: "House", correct: "Ù…Ù†Ø²Ù„", wrong1: "Ø³ÙŠØ§Ø±Ø©", wrong2: "Ø´Ø¬Ø±Ø©" },
            { english: "Water", correct: "Ù…Ø§Ø¡", wrong1: "Ù†Ø§Ø±", wrong2: "Ù‡ÙˆØ§Ø¡" },
            { english: "Cat", correct: "Ù‚Ø·Ø©", wrong1: "ÙƒÙ„Ø¨", wrong2: "Ø·Ø§Ø¦Ø±" }
        ];

        let usedIndices = [];
        let correctAnswers = 0;
        let autoSpeak = true;
        let currentWord = null;
        
        // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
        let sessionAnswers = 0;
        let sessionCorrect = 0;

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function init() {
            loadWords();
            showRandomWord();
            updateStats();
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        function loadWords() {
            const savedWords = localStorage.getItem('englishWords');
            if (savedWords) {
                words = JSON.parse(savedWords);
            }
            const savedScore = localStorage.getItem('correctAnswers');
            if (savedScore) {
                correctAnswers = parseInt(savedScore);
            }
        }

        // Ø­ÙØ¸ Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        function saveWords() {
            localStorage.setItem('englishWords', JSON.stringify(words));
            localStorage.setItem('correctAnswers', correctAnswers.toString());
        }

        // Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        function showRandomWord() {
            // Ø¥Ø°Ø§ Ø§Ø³ØªØ®Ø¯Ù…Ù†Ø§ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§ØªØŒ Ù†Ø¹ÙŠØ¯ ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            if (usedIndices.length >= words.length) {
                usedIndices = [];
            }

            // Ø§Ø®ØªÙŠØ§Ø± ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù… ØªØ³ØªØ®Ø¯Ù… Ø¨Ø¹Ø¯
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * words.length);
            } while (usedIndices.includes(randomIndex));

            usedIndices.push(randomIndex);
            currentWord = words[randomIndex];
            
            displayWord(currentWord);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
        function displayWord(word) {
            document.getElementById('englishWord').textContent = word.english;
            
            const options = document.querySelectorAll('.option-btn');
            const allOptions = [word.correct, word.wrong1, word.wrong2];
            
            // Ø®Ù„Ø· Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
            for (let i = allOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allOptions[i], allOptions[j]] = [allOptions[j], allOptions[i]];
            }
            
            options.forEach((btn, index) => {
                btn.textContent = allOptions[index];
                btn.className = 'option-btn';
                btn.disabled = false;
            });
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            document.getElementById('message').style.display = 'none';
            
            // Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙ‚Ø·
            if (autoSpeak) {
                setTimeout(() => {
                    speakCurrentWord();
                }, 300);
            }
        }

        // Ù†Ø·Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        function speakCurrentWord() {
            const currentWordText = document.getElementById('englishWord').textContent;
            ttsService.speak(currentWordText);
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        function checkAnswer(selectedIndex) {
            const options = document.querySelectorAll('.option-btn');
            const selectedText = options[selectedIndex].textContent;
            const messageElement = document.getElementById('message');
            
            // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
            sessionAnswers++;
            
            if (selectedText === currentWord.correct) {
                // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
                options.forEach(btn => {
                    btn.disabled = true;
                    if (btn.textContent === currentWord.correct) {
                        btn.classList.add('correct');
                    }
                });
                
                correctAnswers++;
                sessionCorrect++;
                saveWords();
                updateStats();
                
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
                messageElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! âœ“';
                messageElement.className = 'message correct';
                messageElement.style.display = 'block';
                
                // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø¹Ø¯ 0.8 Ø«Ø§Ù†ÙŠØ©
                setTimeout(() => {
                    showRandomWord();
                }, 800);
                
            } else {
                // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø© - Ø¥Ø¹Ø§Ø¯Ø© Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø®ÙŠØ§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
                options.forEach(btn => {
                    if (btn.textContent === selectedText) {
                        btn.classList.add('wrong');
                    }
                });
                
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
                messageElement.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
                messageElement.className = 'message wrong';
                messageElement.style.display = 'block';
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø®ÙŠØ§Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
                setTimeout(() => {
                    displayWord(currentWord);
                }, 1000);
            }
        }

        // ØªØ®Ø·ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        function skipWord() {
            showRandomWord();
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø·Ù‚ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function toggleAutoSpeak() {
            autoSpeak = !autoSpeak;
            const icon = document.getElementById('autoSpeakIcon');
            
            if (autoSpeak) {
                icon.textContent = 'ğŸ”Š';
            } else {
                icon.textContent = 'ğŸ”‡';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            document.getElementById('stats').textContent = 
                `Ø§Ù„ÙƒÙ„Ù…Ø§Øª: ${words.length} | Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correctAnswers}`;
        }

        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª
        function toggleAddWords() {
            const panel = document.getElementById('addWordsPanel');
            const sessionPanel = document.getElementById('sessionStats');
            panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            sessionPanel.style.display = 'none';
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
        function showSessionStats() {
            const panel = document.getElementById('sessionStats');
            const addPanel = document.getElementById('addWordsPanel');
            panel.style.display = 'block';
            addPanel.style.display = 'none';
            
            const percentage = sessionAnswers > 0 ? Math.round((sessionCorrect / sessionAnswers) * 100) : 0;
            
            document.getElementById('sessionInfo').textContent = `ØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ ${sessionAnswers} ÙƒÙ„Ù…Ø©`;
            document.getElementById('sessionCorrect').textContent = `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ${sessionCorrect}`;
            document.getElementById('sessionPercentage').textContent = `Ø§Ù„Ù†Ø³Ø¨Ø©: ${percentage}%`;
            document.getElementById('progressFill').style.width = `${percentage}%`;
        }

        // Ø¥Ø®ÙØ§Ø¡ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¬Ù„Ø³Ø©
        function hideSessionStats() {
            document.getElementById('sessionStats').style.display = 'none';
        }

        // Ø¨Ø¯Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©
        function resetSession() {
            sessionAnswers = 0;
            sessionCorrect = 0;
            hideSessionStats();
        }

        // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ù…Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø©
        function addMultipleWords() {
            const textarea = document.getElementById('wordsTextarea');
            const lines = textarea.value.split('\n');
            let addedCount = 0;

            lines.forEach(line => {
                line = line.trim();
                if (line && line.includes('=')) {
                    const [english, arabic] = line.split('=').map(part => part.trim());
                    if (english && arabic) {
                        // Ø¥Ù†Ø´Ø§Ø¡ ØªØ±Ø¬Ù…Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
                        const wrongTranslations = generateWrongTranslations(arabic);
                        
                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
                        const exists = words.some(w => w.english.toLowerCase() === english.toLowerCase());
                        if (!exists) {
                            words.push({
                                english: english,
                                correct: arabic,
                                wrong1: wrongTranslations[0],
                                wrong2: wrongTranslations[1]
                            });
                            addedCount++;
                        }
                    }
                }
            });

            if (addedCount > 0) {
                saveWords();
                updateStats();
                alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${addedCount} ÙƒÙ„Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­!`);
                textarea.value = '';
                document.getElementById('addWordsPanel').style.display = 'none';
            } else {
                alert('Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ ÙƒÙ„Ù…Ø§Øª. ØªØ£ÙƒØ¯ Ù…Ù† ØµÙŠØºØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª (english=Ø¹Ø±Ø¨ÙŠ)');
            }
        }

        // Ø¥Ù†Ø´Ø§Ø¡ ØªØ±Ø¬Ù…Ø§Øª Ø®Ø§Ø·Ø¦Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        function generateWrongTranslations(correctTranslation) {
            const commonWords = [
                'ÙƒØ¨ÙŠØ±', 'ØµØºÙŠØ±', 'Ø³Ø±ÙŠØ¹', 'Ø¨Ø·ÙŠØ¡', 'Ù‚Ø¯ÙŠÙ…', 'Ø¬Ø¯ÙŠØ¯', 'Ø¨Ø¹ÙŠØ¯', 'Ù‚Ø±ÙŠØ¨', 
                'Ø³Ù‡Ù„', 'ØµØ¹Ø¨', 'Ø·ÙˆÙŠÙ„', 'Ù‚ØµÙŠØ±', 'Ø«Ù‚ÙŠÙ„', 'Ø®ÙÙŠÙ', 'Ù‚Ø§Ø³', 'Ù„ÙŠÙ†'
            ];
            const wrongs = [];
            
            while (wrongs.length < 2) {
                const randomWord = commonWords[Math.floor(Math.random() * commonWords.length)];
                if (randomWord !== correctTranslation && !wrongs.includes(randomWord)) {
                    wrongs.push(randomWord);
                }
            }
            
            return wrongs;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (1000 ÙƒÙ„Ù…Ø©)
        function addDefaultWords() {
            const defaultWords = [
                "the=Ø§Ù„", "of=Ù…Ù†", "to=Ø¥Ù„Ù‰", "and=Ùˆ", "a=Ø£", "in=ÙÙŠ", "is=ÙŠÙƒÙˆÙ†", "it=Ù‡Ùˆ", "you=Ø£Ù†Øª",
                "that=Ø°Ù„Ùƒ", "he=Ù‡Ùˆ", "was=ÙƒØ§Ù†", "for=Ù„", "on=Ø¹Ù„Ù‰", "are=ÙŠÙƒÙˆÙ†", "with=Ù…Ø¹", "as=Ùƒ",
                "I=Ø£Ù†Ø§", "his=Ù„Ù‡", "they=Ù‡Ù…", "be=ÙŠÙƒÙˆÙ†", "at=ÙÙŠ", "one=ÙˆØ§Ø­Ø¯", "have=ÙŠÙ…Ù„Ùƒ", "this=Ù‡Ø°Ø§",
                "from=Ù…Ù†", "by=Ø¨ÙˆØ§Ø³Ø·Ø©", "word=ÙƒÙ„Ù…Ø©", "but=Ù„ÙƒÙ†", "what=Ù…Ø§", "some=Ø¨Ø¹Ø¶", "time=ÙˆÙ‚Øª",
                "number=Ø±Ù‚Ù…", "people=Ù†Ø§Ø³", "water=Ù…Ø§Ø¡", "day=ÙŠÙˆÙ…", "part=Ø¬Ø²Ø¡", "sound=ØµÙˆØª", "work=Ø¹Ù…Ù„",
                "place=Ù…ÙƒØ§Ù†", "year=Ø³Ù†Ø©", "back=Ø®Ù„Ù", "thing=Ø´ÙŠØ¡", "name=Ø§Ø³Ù…", "sentence=Ø¬Ù…Ù„Ø©", "man=Ø±Ø¬Ù„",
                "line=Ø®Ø·", "boy=ÙˆÙ„Ø¯", "life=Ø­ÙŠØ§Ø©", "end=Ù†Ù‡Ø§ÙŠØ©", "house=Ù…Ù†Ø²Ù„", "picture=ØµÙˆØ±Ø©", "try=ÙŠØ­Ø§ÙˆÙ„",
                "us=Ù†Ø§", "again=Ù…Ø±Ø© Ø£Ø®Ø±Ù‰", "animal=Ø­ÙŠÙˆØ§Ù†", "point=Ù†Ù‚Ø·Ø©", "mother=Ø£Ù…", "world=Ø¹Ø§Ù„Ù…",
                "computer=Ø­Ø§Ø³ÙˆØ¨", "laptop=Ø­Ø§Ø³ÙˆØ¨ Ù…Ø­Ù…ÙˆÙ„", "desktop=Ø­Ø§Ø³ÙˆØ¨ Ù…ÙƒØªØ¨ÙŠ", "server=Ø®Ø§Ø¯Ù…", "device=Ø¬Ù‡Ø§Ø²",
                "hardware=Ø¹ØªØ§Ø¯", "software=Ø¨Ø±Ù…Ø¬ÙŠØ§Øª", "application=ØªØ·Ø¨ÙŠÙ‚", "program=Ø¨Ø±Ù†Ø§Ù…Ø¬", "system=Ù†Ø¸Ø§Ù…",
                "network=Ø´Ø¨ÙƒØ©", "internet=Ø¥Ù†ØªØ±Ù†Øª", "website=Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨", "browser=Ù…ØªØµÙØ­", "email=Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
                "phone=Ù‡Ø§ØªÙ", "mobile=Ù…ØªØ­Ø±Ùƒ", "smartphone=Ù‡Ø§ØªÙ Ø°ÙƒÙŠ", "tablet=Ù„ÙˆØ­ÙŠ", "camera=ÙƒØ§Ù…ÙŠØ±Ø§",
                "screen=Ø´Ø§Ø´Ø©", "keyboard=Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­", "mouse=ÙØ£Ø±Ø©", "printer=Ø·Ø§Ø¨Ø¹Ø©", "memory=Ø°Ø§ÙƒØ±Ø©",
                "storage=ØªØ®Ø²ÙŠÙ†", "file=Ù…Ù„Ù", "folder=Ù…Ø¬Ù„Ø¯", "data=Ø¨ÙŠØ§Ù†Ø§Øª", "information=Ù…Ø¹Ù„ÙˆÙ…Ø§Øª"
            ];

            let addedCount = 0;
            defaultWords.forEach(wordPair => {
                if (wordPair.includes('=')) {
                    const [english, arabic] = wordPair.split('=').map(part => part.trim());
                    if (english && arabic) {
                        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
                        const exists = words.some(w => w.english.toLowerCase() === english.toLowerCase());
                        if (!exists) {
                            const wrongTranslations = generateWrongTranslations(arabic);
                            words.push({
                                english: english,
                                correct: arabic,
                                wrong1: wrongTranslations[0],
                                wrong2: wrongTranslations[1]
                            });
                            addedCount++;
                        }
                    }
                }
            });

            saveWords();
            updateStats();
            alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${addedCount} ÙƒÙ„Ù…Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!`);
            document.getElementById('addWordsPanel').style.display = 'none';
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.onload = init;
    </script>
</body>
</html>